<html>
        <head>
                <title>WebSocket Chat</title>
        </head>
<style>
#chat {
        height: 400px;
}
</style>
<script>
var sock;
function init(){
        if("WebSocket" in window){
                sock = new WebSocket("ws://192.168.1.102:12345/");
                sock.onopen = function(msg){ notifyStatus("You are connected with state: "+this.readyState); send(0); document.getElementById("chatInput").disabled = false; };
                sock.onmessage = function(msg){ chat(msg.data); };
                sock.onclose = function(msg){ chat ("Disconnected"); };
        } else {
                alert("Your browser does not support WebSockets");
        }
}
function chat(msg){
        var ele = document.getElementById("chat");
        ele.innerHTML += msg + "<br />";
        ele.scrollTop = ele.scrollHeight;
}
function notifyStatus(msg){
		var ele = document.getElementById("status");
		ele.value = msg;
}
function send(ini){
		var uname = document.getElementById('username').value+":";
        var ele = document.getElementById("chatInput");
		var string;
		if (ini) {string = uname+document.getElementById("chatInput").value;}
		else {string = document.getElementById("chatInput").value;}
        sock.send(string);
        ele.value = "";
}
function enter(e){
        if(e.keyCode == 13) send(1);
}
</script>
 
<body onload="init()">
<h1>WebSocket Chat</h1>
<div id="chat"></div>
Chat msg:<input type="text" id="str" value="Connecting" onkeydown="enter(event);" disabled="disabled" />
<button onclick="send(1)">Send</button>
<div>UserName:<input type="text" id="username" /></div>
</body>
</html>